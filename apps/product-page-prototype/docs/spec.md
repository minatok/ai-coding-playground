# 商品詳細ページ プロトタイプ仕様書

## 1. プロジェクト概要

### 1.1 目的と背景
- **目的**: クチコミ要約エリアを備えた商品詳細ページの UI/UX を検証するためのプロトタイプを作成し、クチコミを活用した購買行動支援の有効性を確認する。
- **背景**:
  - コスメ EC における商品詳細ページでは、豊富なクチコミが存在する一方で、要点が分散しユーザーが短時間で理解しづらい課題がある。
  - クチコミを構造化・要約して提示することで、購買判断のスピードと安心感を高めたい。
  - 既存の PoC（ai-cosme-search）と並行して、単品詳細ページのプロトタイプを作り、仕様駆動で改善を進める。

### 1.2 ターゲットユーザー
- コスメ商品の詳細情報・使用感を知りたい 20〜40 代の女性を中心としたユーザー。
- @cosme などの口コミプラットフォームで購買前に他者の評価を確認する習慣があるユーザー。
- 同商品をリピート購入するか、色違いを検討している既存ファン。

### 1.3 解決する課題
- **ユーザー課題**:
  - クチコミが多すぎて自分に関係する情報を素早く把握できない。
  - 購入前に配色・使い方・配送条件など複数の情報を確認する手間がかかる。
- **ビジネス課題**:
  - クチコミ活用によるコンバージョン向上施策を素早く検証したい。
  - 購買行動の意思決定を支援する重要要素を UI 上で整理しきれていない。

### 1.4 プロトタイプ範囲
- **対象カテゴリ**: フェイスパウダー（例: コスメデコルテ ルースパウダー）。
- **実装対象**: モバイル向け商品詳細ビュー 1 画面（縦スクロール）。
- **対象外**:
  - 実際の EC 購買導線（決済、カート）との連携。
  - サーバーサイド API 連携。現状は静的モックデータ。

## 2. 想定ユーザーとユースケース
- **ペルソナ例**: 30 代前半・乾燥肌・リモートワーク中心の女性。仕事の合間にスマホでコスメを比較し、評価の高い商品を探したい。
- **ユースケース**:
  1. 人気の色味を確認しながら、レビュー傾向を短時間で把握したい。
  2. 口コミの中から自分と似た属性（乾燥肌など）の意見を深掘りしたい。
  3. 在庫・配送や店舗受取の可否を確認した上で購入判断したい。

## 3. ユーザーフロー
1. 商品詳細ページにアクセス。
2. カルーセルで商品画像・状態を確認（リニューアル情報含む）。
3. ブランド・価格・評価を確認。
4. オンライン購入／店舗購入ボタンで購入チャネルを検討。
5. 色選択・数量調整を行い、カート追加を検討。
6. 配送／店舗受取などの補足情報を確認。
7. 商品説明・使い方セクションを必要に応じて展開。
8. 「クチコミの傾向」で要約を読み、キーワードごとの要約に切り替えながらフィルタリング。
9. クチコミ詳細をスクロールして個別の声を確認。

## 4. 画面・セクション仕様

### 4.1 ヘッダー
- **要素**: 画面タイトル、共有アイコン、いいねアイコン。
- **挙動**:
  - 共有アイコン: 現状はダミー。タップで何も起きない（将来的にネイティブ共有）。
  - いいねアイコン: トグル式でハートに色が付く。状態はローカル State 管理。
- **特記事項**: スクロールしても固定される sticky ヘッダー。

### 4.2 商品カルーセル
- **要素**: 背景グラデーション、丸型プレビュー、現在枚数表示（1/12）、ラベル（リニューアル）。
- **挙動**: 画像は静的に `powder.png` を表示。HMR 背景。
- **TODO**: 複数画像・スワイプ挙動は未実装。

### 4.3 商品情報ブロック
- **要素**: ブランド名、商品名、価格（税込）、総合評価（星＋数値）、レビュー件数。
- **スタイル**: 星アイコンには `lucide-react` の `Star` を使用。黄色の背景バッジ。

### 4.4 購入チャネルセクション
- **要素**: 「今すぐ買える！」ラベル、公式通販ボタン、実店舗ボタン。 
- **挙動**: ボタン押下で現状は何も起きない（将来はリンク遷移想定）。

### 4.5 色選択セクション
- **要素**: 色チップ（9 色）、選択中の色名表示。
- **挙動**: 色をタップすると選択枠が強調され `selectedColor` が更新。
- **データ**: 色は `id`・`name`・サンプル `hex` を保持するモック。

### 4.6 数量・カートセクション
- **要素**: 数量カウンター（±ボタン）、数量表示、カート追加ボタン。
- **挙動**: 
  - `−` で 1 まで減少、`+` で 1 ずつ増加。
  - カート追加ボタンは現状ダミー挙動。
- **TODO**: 合計金額のリアルタイム表示、ボタン押下時の通知。

### 4.7 配送・受取情報
- **要素**: 送料無料案内、店舗受取案内。`Truck` と `MapPin` アイコン。
- **目的**: 付帯サービスが一目で分かるようにアイコン＋テキストで表示。

### 4.8 折り畳みセクション
- **対象**: 「商品説明」「使い方」。
- **挙動**: セクションヘッダーをタップすると開閉。開いているセクションには `ChevronDown` が 180°回転。
- **コンテンツ**: 箇条書きで特徴・使い方をモック化。

### 4.9 クチコミの傾向（要約エリア）
- **要素**:
  - 感情分布（肯定/中立/否定の 3 指標）。
  - トップキーワード（最大 5 件、トグル式）。
  - 約 200 文字の要約テキスト（キーワード選択に応じて動的に切り替え）。
  - 集計件数表示。
- **挙動**:
  - キーワードボタンを押下すると `selectedKeyword` を更新。選択状態はハイライト。
  - 要約テキストは `selectedKeyword` に対応した事前定義サマリーへ切り替わり、未選択時は全体要約を表示。
- **目的**: クチコミ全体のトーンと特徴を高速に把握させる。

### 4.10 クチコミ一覧
- **要素**: 投稿者情報（ニックネーム、年齢、肌タイプ）、星評価、本文、ハッシュタグ、投稿日。
- **挙動**: `selectedKeyword` が存在する場合、そのキーワードを含むクチコミのみ表示。クリアボタンで解除。
- **データ**: 3 件のモックデータを配列で保持。

## 5. 機能要件
1. **ステート管理**: React Hooks を使用して色・数量・いいね・展開セクション・キーワードフィルタを管理する。
2. **キーワードフィルタ**: 選択したキーワードに紐づくクチコミをリアルタイムで絞り込み表示する。
3. **要約表示**: クチコミ傾向要約は 200 文字前後の事前定義されたテキストを表示し、選択したキーワードに応じて自動切替する（将来的に自動生成 API と連携可能な設計）。
4. **画像表示**: ローカル `powder.png` を読み込み、カルーセル内で丸型マスク表示する。
5. **UI 反応**: 各ボタンにホバー・押下時の視覚的フィードバック（Tailwind ユーティリティ）を適用。
6. **レスポンシブ**: 375px 前後のモバイルビューを想定したスタイル。大きい画面でも極端な崩れが起きないようにする。

## 6. 非機能要件
- **パフォーマンス**: Vite + React を用いたシングルページ構成。初期ロード時間は 1 秒以内（ローカル環境）。
- **可読性**: コンポーネントは 1 ファイルで構成。将来はセクションごとに分割する余地あり。
- **保守性**: 色・クチコミデータは上部で定義。API 連携が可能な構造を維持。
- **UI 一貫性**: Tailwind CSS を使用し、配色はピンク〜パープルを中心としたグラデーションで統一。
- **依存ライブラリ**: `lucide-react`, Tailwind, Vite。ライセンスは OSS (MIT)。

## 7. 既知の制約・TODO
- クチコミデータは静的。サーバー API や LLM と連携していない。
- カート・購入ボタンはダミーであり、バックエンドとの接続は未実装。
- カメラ・動画・複数画像のスワイプ操作は未対応。
- いいね状態などの永続化はしていない（ブラウザリロードでリセット）。
- アクセシビリティ: テキストコントラストやフォーカスリングなど詳細対応は今後検討。
- ユニットテスト・E2E テストは未作成。

## 8. 今後の拡張候補
1. **クチコミ要約自動化**: LLM や分析 API を使いリアルタイム要約生成／キーワード抽出。
2. **パーソナライズ**: 肌タイプ・年代などユーザー属性に合わせたレビュー並び替え。
3. **比較機能**: 同カテゴリ商品と比較する UI（星評価分布、価格帯など）。
4. **購入導線**: カート・決済システムとの結合、在庫 API 連携。
5. **メトリクス計測**: 滞留時間、ボタンタップ率、クチコミフィルタ利用率等のイベントログ設計。
